<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Agri Agent - Result</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial; margin: 2rem; }
      .card { max-width: 900px; margin: 0 auto; padding: 1.5rem; border: 1px solid #e2e8f0; border-radius: 10px; box-shadow: 0 1px 3px rgba(0,0,0,0.06); }
      pre { white-space: pre-wrap; }
      table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
      th, td { border: 1px solid #e2e8f0; padding: 0.6rem; text-align: left; }
      th { background: #f8fafc; }
      a { color: #2563eb; }
    </style>
  </head>
  <body>
    <div class="card">
      <h2>Recommendation</h2>
      <p><strong>Crop:</strong> {{ crop }}</p>

      <h3>Optimized Targets</h3>
      <table>
        <thead><tr><th>Metric</th><th>Value</th></tr></thead>
        <tbody>
          <tr><td>Soil pH</td><td>{{ optimized.soil_ph or '-' }}</td></tr>
          <tr><td>Soil Moisture %</td><td>{{ optimized.soil_moisture or '-' }}</td></tr>
          <tr><td>N (kg/ha)</td><td>{{ optimized.n or '-' }}</td></tr>
          <tr><td>P (kg/ha)</td><td>{{ optimized.p or '-' }}</td></tr>
          <tr><td>K (kg/ha)</td><td>{{ optimized.k or '-' }}</td></tr>
          {% if optimized.lime_required_t_ha is defined %}
          <tr><td>Lime Required (t/ha)</td><td>{{ optimized.lime_required_t_ha }}</td></tr>
          {% endif %}
        </tbody>
      </table>

      <h3>Steps & Tips</h3>
      <pre>{{ remedies_text }}</pre>

      <h3>Knowledge Base</h3>
      <p><strong>Fertilizer Tips:</strong> {{ fertilizer_tips }}</p>
      <p><strong>Pest Control:</strong> {{ pest_control }}</p>
      <p><strong>Plan:</strong> {{ plan }}</p>
      <p><strong>Government Schemes:</strong> {{ gov_schemes }}</p>

      <p><a href="/">&#8592; Back</a></p>
    </div>
  </body>
  </html>


